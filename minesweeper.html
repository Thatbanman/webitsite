<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minesweeper</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #282c34;
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0;
      height: 100vh;
    }
    h1 {
      margin-bottom: 10px;
      color: #61dafb;
    }
    .board {
      display: grid;
      gap: 2px;
      border: 2px solid #444;
      background-color: #333;
      margin-top: 20px;
      overflow: auto;
      max-height: 80vh;
      max-width: 80vw;
    }
    .cell {
      width: 30px;
      height: 30px;
      background-color: #666;
      border: 1px solid #555;
      text-align: center;
      line-height: 30px;
      cursor: pointer;
      font-weight: bold;
      font-size: 18px;
      color: white;
    }
    .cell.revealed {
      background-color: #999;
      border-color: #888;
      cursor: default;
    }
    .cell.mine {
      background-color: #e74c3c;
      color: #fff;
    }
    .cell.flagged {
      background-color: #27ae60;
      color: #fff;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      background-color: #61dafb;
      border: none;
      color: #282c34;
      font-size: 16px;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #4a98c9;
    }
    .mode-selection {
      display: flex;
      gap: 10px;
    }
    .secret-code {
      position: fixed;
      bottom: 10px;
      left: 10px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .secret-code input {
      padding: 5px;
      font-size: 14px;
      border-radius: 3px;
      border: 1px solid #555;
      background-color: #444;
      color: #fff;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h1>Minesweeper</h1>
  <div class="mode-selection">
    <button onclick="setMode('easy')">Easy</button>
    <button onclick="setMode('normal')">Normal</button>
    <button onclick="setMode('hard')">Hard</button>
    <button onclick="setMode('impossible')">Impossible</button>
  </div>
  <div id="board" class="board"></div>
  <button id="restart" style="display: none;">Restart Game</button>

  <div class="secret-code">
    <label for="cheatCode" style="font-size: 12px; color: #aaa;">Secret Code:</label>
    <input type="text" id="cheatCode" placeholder="Enter code">
  </div>

  <script>
    const sizeOptions = {
      easy: { rows: 10, cols: 10, mines: 15 },
      normal: { rows: 20, cols: 20, mines: 50 },
      hard: { rows: 30, cols: 30, mines: 120 },
      impossible: { rows: Infinity, cols: Infinity, mines: Infinity }
    };

    let board = [];
    let gameOver = false;
    let firstClick = true;
    let currentMode = 'easy';
    let config = sizeOptions[currentMode];
    let gameStarted = false;
    const boardEl = document.getElementById('board');
    const restartBtn = document.getElementById('restart');
    const cheatCodeInput = document.getElementById('cheatCode');

    // Set the game mode
    function setMode(mode) {
      currentMode = mode;
      config = sizeOptions[mode];
      initBoard();
    }

    // Initialize the game board
    function initBoard() {
      firstClick = true;
      gameOver = false;
      gameStarted = false;
      board = [];
      boardEl.innerHTML = '';
      restartBtn.style.display = currentMode === 'impossible' ? 'none' : 'block';

      boardEl.style.gridTemplateRows = `repeat(${config.rows}, 1fr)`;
      boardEl.style.gridTemplateColumns = `repeat(${config.cols}, 1fr)`;

      for (let row = 0; row < config.rows; row++) {
        const rowArray = [];
        for (let col = 0; col < config.cols; col++) {
          const cell = { row, col, mine: false, revealed: false, flagged: false, adjacentMines: 0 };
          rowArray.push(cell);

          const cellEl = createCellElement(cell);
          boardEl.appendChild(cellEl);
        }
        board.push(rowArray);
      }
    }

    // Create a cell element
    function createCellElement(cell) {
      const cellEl = document.createElement('div');
      cellEl.classList.add('cell');
      cellEl.dataset.row = cell.row;
      cellEl.dataset.col = cell.col;

      cellEl.addEventListener('click', () => handleCellClick(cell, cellEl));
      cellEl.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        handleRightClick(cell, cellEl);
      });

      return cellEl;
    }

    // Handle left-click on a cell
    function handleCellClick(cell, cellEl) {
      if (gameOver || cell.revealed || cell.flagged) return;

      cell.revealed = true;
      cellEl.classList.add('revealed');

      if (cell.mine) {
        cellEl.classList.add('mine');
        gameOver = true;
        alert("Game Over! You hit a mine.");
      } else {
        revealAdjacentCells(cell);
      }
    }

    // Handle right-click to flag a cell
    function handleRightClick(cell, cellEl) {
      if (gameOver || cell.revealed) return;

      cell.flagged = !cell.flagged;
      if (cell.flagged) {
        cellEl.classList.add('flagged');
      } else {
        cellEl.classList.remove('flagged');
      }
    }

    // Reveal adjacent cells if the cell is empty
    function revealAdjacentCells(cell) {
      // Add logic to reveal adjacent cells
    }

    // Cheat code to reveal all mines
    cheatCodeInput.addEventListener('input', function() {
      if (cheatCodeInput.value === "Im A Cheater") {
        alert("Cheat Code Accepted! Revealing all mines.");
        revealAllMines();
        cheatCodeInput.disabled = true;  // Disable the input after using the cheat code
      }
    });

    // Reveal all mines when cheat code is entered
    function revealAllMines() {
      board.forEach(row => {
        row.forEach(cell => {
          if (cell.mine) {
            const cellEl = boardEl.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
            cellEl.classList.add('mine');
          }
        });
      });
    }

    // Initialize the board on page load
    initBoard();
  </script>
</body>
</html>
